---
phase: 03-real-time-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/JobCard.tsx
  - src/components/KanbanLane.tsx
  - src/components/ProgressBar.tsx
  - src/hooks/useClickTracking.ts
  - src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Cards animate with slide transition when migrating lanes (200-300ms)"
    - "Progress bars pulse and change color when near threshold (80%+)"
    - "Toast messages use degen-style language"
    - "Toaster configured with max 3 visible toasts and 4 second duration"
  artifacts:
    - path: "src/components/JobCard.tsx"
      provides: "Slide animation capability"
      contains: "transition"
    - path: "src/components/ProgressBar.tsx"
      provides: "Near-threshold visual emphasis"
      contains: "pulse"
    - path: "src/hooks/useClickTracking.ts"
      provides: "Degen-style toast messages"
      contains: "LFG"
    - path: "src/App.tsx"
      provides: "Configured Toaster component"
      contains: "visibleToasts"
  key_links:
    - from: "src/components/KanbanLane.tsx"
      to: "src/components/JobCard.tsx"
      via: "isAnimating prop"
      pattern: "isAnimating"
    - from: "src/App.tsx"
      to: "sonner"
      via: "Toaster configuration"
      pattern: "Toaster.*visibleToasts"
---

<objective>
Add visual polish: CSS transform slide animations for lane migrations, near-threshold emphasis on progress bars (pulse + color change at 80%), and degen-style toast messages with proper Toaster configuration.

Purpose: Make lane migrations feel playful and energetic per CONTEXT.md. The "degenerate" aesthetic is core to brand identity - fast animations, crypto slang, chaotic energy.
Output: Animated card transitions, pulsing progress bars near threshold, "LFG!" style toasts.
</objective>

<execution_context>
@C:\Users\thedi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\thedi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-real-time-polish/03-CONTEXT.md
@.planning/phases/03-real-time-polish/03-RESEARCH.md

# Key source files
@src/components/JobCard.tsx
@src/components/KanbanLane.tsx
@src/components/ProgressBar.tsx
@src/hooks/useClickTracking.ts
@src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS transform slide animation to JobCard</name>
  <files>src/components/JobCard.tsx, src/components/KanbanLane.tsx</files>
  <action>
**Part A: Update JobCard to support animation**

Add an `isAnimating` prop to JobCard that triggers a slide-in animation.

1. Add to props interface:
```typescript
isAnimating?: boolean;
```

2. Add CSS transition classes to the root div. When `isAnimating` is true, apply entrance animation:
```typescript
className={`... ${isAnimating ? 'animate-slide-in' : ''}`}
```

3. Add inline styles for the animation (using CSS transform for 60fps performance):
```typescript
style={{
  animation: isAnimating ? 'slideIn 250ms cubic-bezier(0.215, 0.61, 0.355, 1)' : undefined,
}}
```

4. Add keyframes via a style tag or Tailwind config. For simplicity, use Tailwind's built-in animation system by adding to the className:
```typescript
// Use Tailwind's animate utilities with custom animation
className={`... transition-all duration-200 ${isAnimating ? 'animate-[slideIn_250ms_ease-out]' : ''}`}
```

Actually, since Tailwind doesn't have slideIn built-in, use a simpler approach with CSS-in-JS:
- Add a `transform` and `opacity` based animation using inline styles
- On initial render with isAnimating=true: start at translateX(100%), opacity 0
- Animate to translateX(0), opacity 1

Better approach - use Tailwind's built-in animations with custom CSS:
```typescript
<div
  className={`relative bg-black border rounded-lg p-4 ... ${
    isAnimating
      ? 'animate-[slideIn_250ms_cubic-bezier(0.215,0.61,0.355,1)]'
      : ''
  }`}
>
```

And add the keyframes to index.css:
```css
@keyframes slideIn {
  from {
    transform: translateX(50%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
```

**Part B: Track animating jobs in KanbanLane**

Update KanbanLane to track which jobs recently migrated and should animate.

1. Add state to track animating job IDs:
```typescript
const [animatingIds, setAnimatingIds] = useState<Set<string>>(new Set());
```

2. Use useEffect to detect new jobs in the lane (comparing previous vs current job IDs):
```typescript
const prevJobIds = useRef<Set<string>>(new Set());

useEffect(() => {
  const currentIds = new Set(jobs.map(j => j.job_id));
  const newIds = [...currentIds].filter(id => !prevJobIds.current.has(id));

  if (newIds.length > 0) {
    setAnimatingIds(new Set(newIds));
    // Clear animation state after animation completes
    const timer = setTimeout(() => setAnimatingIds(new Set()), 300);
    return () => clearTimeout(timer);
  }

  prevJobIds.current = currentIds;
}, [jobs]);
```

3. Pass isAnimating prop to JobCard:
```tsx
<JobCard
  ...
  isAnimating={animatingIds.has(job.job_id)}
/>
```

**Part C: Add keyframes to CSS**

Add to src/index.css (if exists) or create inline in App.tsx:
```css
@keyframes slideIn {
  from {
    transform: translateX(50%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
```

Use transform (not left/right) for GPU acceleration per RESEARCH.md anti-patterns.
  </action>
  <verify>
JobCard accepts isAnimating prop.
KanbanLane tracks new jobs and passes isAnimating=true for recent arrivals.
CSS keyframes defined for slideIn animation.
TypeScript compiles: `npm run build` succeeds.
  </verify>
  <done>Cards animate with 250ms slide-in when entering a new lane. Animation uses CSS transforms for 60fps performance.</done>
</task>

<task type="auto">
  <name>Task 2: Add near-threshold emphasis to ProgressBar</name>
  <files>src/components/ProgressBar.tsx</files>
  <action>
Update ProgressBar to show visual emphasis when near threshold (80%+ progress).

1. Calculate if near threshold (80% or more):
```typescript
const isNearThreshold = percentage >= 80 && lane !== 'graduated';
```

2. Change gradient colors when near threshold:
- Normal new lane: from-blue-600 to-purple-600
- Near threshold: from-yellow-500 to-orange-500 (warmer, more urgent)
- Normal trending lane: from-purple-600 to-pink-600
- Near threshold trending: from-orange-500 to-red-500

```typescript
const gradientClass = isNearThreshold
  ? 'from-yellow-500 to-orange-500'
  : lane === 'new'
    ? 'from-blue-600 to-purple-600'
    : 'from-purple-600 to-pink-600';
```

3. Add pulse animation when near threshold:
```typescript
className={`bg-gradient-to-r ${gradientClass} h-1.5 rounded-full transition-all duration-500 ${
  isNearThreshold ? 'animate-pulse' : ''
}`}
```

4. Update the click count text to show excitement when near threshold:
```typescript
<div className={`text-xs text-center ${isNearThreshold ? 'text-yellow-400 font-bold' : 'text-gray-300'}`}>
  {current} {current === 1 ? 'click' : 'clicks'}
  {isNearThreshold && ' - Almost there!'}
</div>
```

5. Add subtle glow effect to the background when near threshold:
```typescript
const bgGradientClass = isNearThreshold
  ? 'from-yellow-500/20 to-orange-500/20 border-yellow-500/40'
  : lane === 'new'
    ? 'from-blue-500/20 to-purple-500/20'
    : 'from-purple-500/20 to-pink-500/20';
```

Keep the "Graduated" badge unchanged for the graduated lane.
  </action>
  <verify>
ProgressBar shows different colors at 80%+ progress.
ProgressBar has animate-pulse class when near threshold.
Text shows "Almost there!" when near threshold.
TypeScript compiles: `npm run build` succeeds.
  </verify>
  <done>Progress bars pulse with warm colors (yellow/orange) when at 80%+ threshold, showing "Almost there!" text.</done>
</task>

<task type="auto">
  <name>Task 3: Update toast messages to degen style and configure Toaster</name>
  <files>src/hooks/useClickTracking.ts, src/App.tsx</files>
  <action>
**Part A: Update toast messages in useClickTracking**

Replace existing toast messages with degen-style language per CONTEXT.md:

1. For migration to trending (line ~37-40):
```typescript
if (data.newLane === 'trending') {
  toast.success('LFG! Job is pumping', {
    description: `"${variables.jobTitle || 'Job'}" hit Trending lane`,
  });
}
```

2. For migration to graduated (line ~41-44):
```typescript
else if (data.newLane === 'graduated') {
  toast.success('Job to the moon!', {
    description: `"${variables.jobTitle || 'Job'}" graduated - top tier now`,
  });
}
```

3. For regular click (line ~45-48):
```typescript
else {
  toast.success('Click recorded, fren', {
    description: `${data.clickCount} total clicks`,
  });
}
```

4. For already clicked (line ~32-35):
```typescript
if (data.alreadyClicked) {
  toast.info('Already sent it, anon', {
    description: 'Your click was recorded earlier',
  });
}
```

5. For error (line ~56-59):
```typescript
toast.error('Rekt! Click failed', {
  description: error.message || 'Try again ser',
});
```

**Part B: Configure Toaster in App.tsx**

Find the Toaster component and update its configuration:

```tsx
<Toaster
  position="top-right"
  toastOptions={{
    duration: 4000, // 4 seconds auto-dismiss
  }}
  visibleToasts={3} // Max 3 toasts visible at once
  richColors // Enable rich color variants
/>
```

If Toaster is imported from sonner but not yet configured with these options, add them. The position should be "top-right" to not interfere with the Kanban board.
  </action>
  <verify>
useClickTracking uses degen-style messages ("LFG!", "to the moon!", "fren", "anon", "Rekt!", "ser").
Toaster has visibleToasts={3} and duration: 4000 configured.
Toaster position is "top-right".
TypeScript compiles: `npm run build` succeeds.
  </verify>
  <done>Toast messages use degen/crypto slang ("LFG!", "to the moon!"), Toaster configured with max 3 visible toasts and 4s duration.</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npm run build` succeeds with no TypeScript errors
2. `npm run dev` and test:
   - Progress bar at 4/5 clicks shows yellow/orange colors and pulse animation
   - Progress bar at 4/5 shows "Almost there!" text
   - When a job migrates (simulate by changing DB), card slides in
   - Toast shows "LFG! Job is pumping" style messages
   - Max 3 toasts visible, auto-dismiss after 4 seconds
</verification>

<success_criteria>
- JobCard supports isAnimating prop with 250ms CSS transform animation
- KanbanLane detects new jobs and triggers slide-in animation
- ProgressBar shows pulse animation and warm colors at 80%+ progress
- ProgressBar shows "Almost there!" text when near threshold
- Toast messages use degen slang ("LFG!", "to the moon!", "fren", "anon")
- Toaster configured with visibleToasts: 3, duration: 4000, position: top-right
- All changes use CSS transforms (not layout properties) for 60fps performance
</success_criteria>

<output>
After completion, create `.planning/phases/03-real-time-polish/03-02-SUMMARY.md`
</output>
