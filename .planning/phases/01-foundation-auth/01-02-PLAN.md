---
phase: 01-foundation-auth
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/types/job.ts
  - src/services/jsearch.ts
  - src/hooks/useJobs.ts
  - src/components/JobCard.tsx
  - src/components/JobList.tsx
  - src/App.tsx
  - .env.local
autonomous: false
user_setup:
  - service: jsearch
    why: "Job listings API"
    env_vars:
      - name: VITE_JSEARCH_API_KEY
        source: "RapidAPI Dashboard -> Subscribe to JSearch API -> Copy API Key"

must_haves:
  truths:
    - "User can view job cards with title, company, location, and pay"
    - "User can click Quick Apply button to redirect to original job posting"
    - "System fetches service-industry jobs from JSearch API"
    - "Jobs are cached for 24+ hours to conserve API quota"
    - "Click events are tracked (job_id logged for Phase 2)"
  artifacts:
    - path: "src/types/job.ts"
      provides: "Job type definition"
      exports: ["Job"]
      min_lines: 8
    - path: "src/services/jsearch.ts"
      provides: "JSearch API client"
      exports: ["searchJobs"]
      min_lines: 20
    - path: "src/hooks/useJobs.ts"
      provides: "React Query hook for job fetching"
      exports: ["useJobs"]
      min_lines: 10
    - path: "src/components/JobCard.tsx"
      provides: "Individual job card component"
      exports: ["JobCard"]
      min_lines: 30
    - path: "src/components/JobList.tsx"
      provides: "Job listing container"
      exports: ["JobList"]
      min_lines: 20
  key_links:
    - from: "src/hooks/useJobs.ts"
      to: "src/services/jsearch.ts"
      via: "API call in queryFn"
      pattern: "searchJobs"
    - from: "src/components/JobList.tsx"
      to: "src/hooks/useJobs.ts"
      via: "Hook call"
      pattern: "useJobs"
    - from: "src/components/JobCard.tsx"
      to: "window.open"
      via: "Quick Apply click handler"
      pattern: "window\\.open.*job_apply_link"
    - from: "src/App.tsx"
      to: "src/components/JobList.tsx"
      via: "Component render"
      pattern: "<JobList"
---

<objective>
Create the job fetching service layer and display components, connecting to JSearch API with aggressive caching, and building the job card UI with Quick Apply functionality.

Purpose: Users need to see service-industry job listings with minimal info (title, company, location, pay) and have a clear CTA to apply. The 24-hour cache is critical to conserve JSearch's 500 req/month free tier quota.

Output: Working job board displaying fast-food jobs from JSearch API with Quick Apply buttons that redirect to original postings.
</objective>

<execution_context>
@C:\Users\thedi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\thedi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-auth/01-CONTEXT.md
@.planning/phases/01-foundation-auth/01-RESEARCH.md
@.planning/phases/01-foundation-auth/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create JSearch API Service Layer with Caching</name>
  <files>
    src/types/job.ts
    src/services/jsearch.ts
    src/hooks/useJobs.ts
  </files>
  <action>
1. Create src/types/job.ts:
   ```typescript
   export interface Job {
     job_id: string;
     job_title: string;
     employer_name: string;
     job_city: string;
     job_state: string;
     job_country: string;
     job_apply_link: string;
     job_min_salary?: number;
     job_max_salary?: number;
     job_salary_currency?: string;
     job_salary_period?: string;
     job_description?: string;
     employer_logo?: string;
   }
   ```

2. Create src/services/jsearch.ts:
   - Create axios instance with baseURL 'https://jsearch.p.rapidapi.com'
   - Set headers for X-RapidAPI-Key (from import.meta.env.VITE_JSEARCH_API_KEY) and X-RapidAPI-Host
   - Export interface JobSearchParams: { query: string; num_pages?: number; page?: number }
   - Export async function searchJobs(params: JobSearchParams): Promise<Job[]>
   - Handle 429 rate limit errors specifically with clear message
   - Use query "fast food crew member USA" as the default search
   - Limit to num_pages: 1 to conserve quota (fetches ~10 jobs per page)

3. Create src/hooks/useJobs.ts:
   - Import useQuery from @tanstack/react-query
   - Import searchJobs from services
   - Export function useJobs(searchQuery?: string):
     * Default query: "fast food crew member USA"
     * queryKey: ['jobs', searchQuery]
     * queryFn calls searchJobs
     * enabled: true (fetch on mount with default query)
   - Note: QueryClient already configured with 24h staleTime in App.tsx from Plan 01
   - Return the full useQuery result (data, isLoading, error, etc.)

4. Verify API connection (requires API key):
   - Add VITE_JSEARCH_API_KEY to .env.local (placeholder value for now)
   - Log response shape to console during development
  </action>
  <verify>
    - TypeScript compiles without errors
    - Job interface covers required fields (title, company, location, pay, apply link)
    - searchJobs function is typed correctly
    - useJobs hook returns proper TanStack Query result shape
    - API call includes proper RapidAPI headers
  </verify>
  <done>
    JSearch API layer complete with typed Job interface, axios service, and TanStack Query hook. Ready to fetch fast-food jobs with 24-hour cache.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Job Card and Job List Components</name>
  <files>
    src/components/JobCard.tsx
    src/components/JobList.tsx
    src/App.tsx
  </files>
  <action>
1. Create src/components/JobCard.tsx:
   - Import Job type
   - Props: { job: Job; onApplyClick: (jobId: string, applyLink: string) => void }
   - Display:
     * job_title (h3, bold, white text)
     * employer_name (gray text)
     * Location: combine job_city + job_state, handle missing values gracefully
     * Salary: format as "$X - $Y" if both exist, "Pay info not listed" otherwise
   - Quick Apply button:
     * Bold, gradient purple-to-pink background
     * Full width, prominent CTA
     * onClick calls onApplyClick(job.job_id, job.job_apply_link)
   - Degen styling: black card bg, purple border, hover effect

2. Create src/components/JobList.tsx:
   - Import useJobs hook
   - Import JobCard component
   - Fetch jobs on mount (useJobs with default query)
   - Handle states:
     * Loading: Show "Loading jobs..." with degen flair
     * Error: Show error message, suggest checking API key
     * Empty: Show "No jobs found" message
     * Success: Render JobCard for each job
   - Implement handleApplyClick function:
     * console.log click event with job_id (tracks for Phase 2)
     * window.open(applyLink, '_blank') to redirect to original posting
   - Layout: full-width cards stacked vertically with gap, max-width container centered

3. Update src/App.tsx:
   - Replace placeholder job area with JobList component
   - Ensure proper imports and component hierarchy

4. Style per CONTEXT.md decisions:
   - Bold/degen visual style: high contrast, vibrant accents
   - Medium list layout: full-width cards, ~6-8 visible on screen
   - Quick Apply as primary CTA: bold, prominent, stands out
  </action>
  <verify>
    - JobCard renders all required info (title, company, location, pay)
    - Quick Apply button is visually prominent
    - Clicking Quick Apply opens new tab with job posting
    - Click event is logged to console (job_id visible)
    - Loading/error/empty states display correctly
    - Cards stack vertically with consistent spacing
  </verify>
  <done>
    Job cards display with title, company, location, pay, and Quick Apply CTA. Clicking Quick Apply redirects to original posting and logs the event for future click tracking.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1: Foundation & Auth
    - Vite + React + TypeScript + Tailwind project
    - Phantom wallet authentication with session persistence
    - JSearch API integration with 24-hour caching
    - Job cards with Quick Apply functionality
  </what-built>
  <how-to-verify>
    1. Ensure .env.local exists with your VITE_JSEARCH_API_KEY from RapidAPI
    2. Run `npm run dev` and open http://localhost:5173

    Test wallet auth (AUTH-01, AUTH-02):
    3. Click wallet connect button
    4. Connect Phantom wallet
    5. Verify truncated address shows in header
    6. Refresh the page - should auto-reconnect

    Test job display (JOBS-01, JOBS-02, JOBS-03):
    7. Verify job cards load (may take a moment)
    8. Check each card shows: title, company, location, pay (or "Pay info not listed")
    9. Click "Quick Apply" on any job
    10. Verify new tab opens with original job posting
    11. Check browser console - should see logged click event with job_id

    Test caching (SYNC-01, SYNC-02):
    12. Note the jobs displayed
    13. Refresh the page
    14. Jobs should load instantly from cache (no network request)
    15. Check Network tab - no new API call to jsearch.p.rapidapi.com

    Visual check:
    16. Dark theme with purple/pink accents
    17. Cards are full-width, stacked vertically
    18. Quick Apply button is bold and prominent
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 1 requirements coverage:

| Requirement | Status | Verified By |
|-------------|--------|-------------|
| AUTH-01: Phantom wallet connect | Task 1 (Plan 01) | Wallet button works |
| AUTH-02: Session persistence | Task 2 (Plan 01) | Auto-reconnect on refresh |
| JOBS-01: View job cards | Task 2 | Cards render with all info |
| JOBS-02: Quick Apply redirect | Task 2 | New tab opens with job link |
| JOBS-03: Track clicks | Task 2 | Console log on click |
| SYNC-01: Fetch from JSearch | Task 1 | API response received |
| SYNC-02: 24h cache | Task 1 | TanStack Query config |
</verification>

<success_criteria>
- Job cards display with title, company, location, pay
- Quick Apply opens original job posting in new tab
- Click events logged with job_id (Phase 2 tracking foundation)
- Jobs cached for 24 hours (no refetch on refresh)
- Loading, error, and empty states handled gracefully
- Human verification confirms full Phase 1 flow works
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth/01-02-SUMMARY.md`
</output>
